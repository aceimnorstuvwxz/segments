@startuml
(*) --> "按协议构建查询请求" 
--> "向天气网请求数据"
If "HTTP正确返回 且 数据正常" then
--> [Yes] "按协议解析返回数据，获得预报天气信息"
--> "更新内存缓存"
--> "更新持久化缓存"
--> "更新成功"
--> "调用回调通知上层更新情况"
else
--> [No]”更新失败"
--> "调用回调通知上层更新情况"
Endif
-->(*)
@enduml